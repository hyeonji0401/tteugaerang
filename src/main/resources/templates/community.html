<!DOCTYPE html>
<html lang="ko" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community - 뜨개랑</title>
    <link rel="stylesheet" href="/css/community.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="wrapper">
        <header>
            <nav>
                <ul class="menu">
                    <div class="menu-group-1">
                        <li><a href="/community">Community</a></li>
                        <li><a href="/ai">AI</a></li>
                        <li><a href="/shop">Shop</a></li>
                        <li><a href="/design">Design</a></li>
                    </div>
                
                    <div class="menu-group-2">
                        <li><a href="/login" class="login-btn" id="login-btn" onclick="location.href='/login'" sec:authorize="isAnonymous()">로그인</a></li>
                        <li><a href="/signup" class="signup-btn" id="signup-btn" onclick="location.href='/signup'" sec:authorize="isAnonymous()">회원가입</a></li>
                        <li><a href="/logout" class="login-btn" id="logout-btn" onclick="location.href='/logout'" sec:authorize="isAuthenticated()">로그아웃</a></li>
                        <li><a href="/mypage" class="signup-btn" id="mypage-btn" onclick="location.href='/mypage'" sec:authorize="isAuthenticated()">마이페이지</a></li>
                    </div>
                </ul>
            </nav>
            <hr class="thin-line">
            <div class="logo-section">
                <h1>뜨개질의 선두주자</h1>
                <a href="/" class="no-underline"><h2>뜨개랑</h2></a>
            </div>
        </header>

        <main>
            <div class="tab-section-wrapper">
                <h2 class="section-title">커뮤니티 게시판</h2>
                <div class="tab-section">
                    <button class="active">#자유게시판</button>
                    <button>#정보게시판</button>
                    <button>#질문답변</button>
                    <button>#후기게시판</button>
                </div>
            </div>
            <section class="search-section">
                <label><input type="radio" name="search-type" id="name" value="name"> 이름</label>
                <label><input type="radio" name="search-type" id="title" value="title" checked> 제목</label>
                <label><input type="radio" name="search-type" id="content" value="content"> 내용</label>
                <div class="search-field">
                    <input type="text" id="search" placeholder="검색">
                    <button class="search-btn"><i class="fas fa-search"></i></button>
                </div>
            </section>

            <!-- 게시글 목록 -->
            <section class="notice-list">
                <ul class="notice-list" th:each="community, loop : ${paging}">
                    <li>
                        <a th:href="@{post_detail.html}" th:text="${community.title}"></a>
                        <span class="post-meta" th:text="'작성자: ' + ${community.writer} + ' | ' + ${#temporals.format(community.writeTime, 'yyyy-MM-dd HH:mm:ss')}"></span>
                    </li>
                </ul>
            </section>

            <!-- 글 작성 버튼 -->
            <div class="write-button">
                <!-- 인증된 사용자는 원래 경로로 이동 -->
                <a href="/community/create" class="btn-write" onclick="location.href='/community/create'" sec:authorize="isAuthenticated()">글 작성하기</a>

                <!-- 미인증 사용자는 클릭 시 메시지 표시 -->
                <a href="#" class="btn-write" onclick="showLoginMessage()" sec:authorize="isAnonymous()">글 작성하기</a>
            </div>

            <script>
                function showLoginMessage() {
                    alert("로그인이 필요합니다.");
                }
            </script>

            <div th:if="${!paging.isEmpty()}" class="pagination">
                <ul>
                    <li  th:classappend="${!paging.hasPrevious} ? 'disabled'">
                        <a
                           th:href="@{|?page=${paging.number-1}|}">
                            <span>이전</span>
                        </a>
                    </li>
                    <li th:each="page: ${#numbers.sequence(0, paging.totalPages-1)}"
                        th:if="${page >= paging.number-5 and page <= paging.number+5}"
                        th:classappend="${page == paging.number} ? 'active'"
                        class="page-item">
                        <a th:text="${page}" class="page-link" th:href="@{|?page=${page}|}"></a>
                    </li>
                    <li th:classappend="${!paging.hasNext} ? 'disabled'">
                        <a th:href="@{|?page=${paging.number+1}|}">
                            <span>다음</span>
                        </a>
                    </li>
                </ul>
            </div>

<!--            <div class="pagination">-->
<!--                <a href="#">&laquo;</a>-->
<!--                <a href="#" class="active">1</a>-->
<!--                <a href="#">2</a>-->
<!--                <a href="#">3</a>-->
<!--                <a href="#">&raquo;</a>-->
<!--            </div>-->
        </main>
    </div>

    <footer>
        <p>© 2024 뜨개랑. All rights reserved.</p>
    </footer>
</body>
</html>
